; commandp parity for interactive commands, alias resolution, and lambda interactive forms.
(commandp 'ignore)
(commandp 'execute-extended-command)
(commandp 'car)
(commandp 'eval-expression)
(commandp 'self-insert-command)
(commandp 'newline)

(let ((orig (symbol-function 'vm-cmd)))
  (unwind-protect
      (progn
        (fset 'vm-cmd 'ignore)
        (commandp 'vm-cmd))
    (fset 'vm-cmd orig)))

(commandp '(lambda nil (interactive) 1))
(commandp '(lambda nil "doc" (interactive) 1))
(commandp '(lambda (x) x))

(let ((orig (symbol-function 't)))
  (unwind-protect
      (progn
        (fset t 'ignore)
        (commandp t))
    (fset 't orig)))

(let ((orig-k (symbol-function :vm-cmd-k)))
  (unwind-protect
      (progn
        (fset :vm-cmd-k 'ignore)
        (commandp :vm-cmd-k))
    (fset :vm-cmd-k orig-k)))

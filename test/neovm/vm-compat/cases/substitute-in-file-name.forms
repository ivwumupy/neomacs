; substitute-in-file-name compatibility.
(substitute-in-file-name "$HOME/foo")
(substitute-in-file-name "${HOME}/foo")
(substitute-in-file-name "$UNDEF/foo")
(substitute-in-file-name "$$HOME")
(substitute-in-file-name "${}")
(substitute-in-file-name "$")
(substitute-in-file-name "${HOME")
(substitute-in-file-name "bar/~/foo")
(substitute-in-file-name "/usr/local/$HOME/foo")
(substitute-in-file-name "foo/$HOME/bar")
(substitute-in-file-name "a//b")
(substitute-in-file-name "a///b")
(condition-case err (substitute-in-file-name :x) (error (car err)))

; get-file-buffer path and type semantics.

(get-file-buffer "/tmp/neovm-no-such-file")

(condition-case err
    (get-file-buffer 1)
  (error err))

(let* ((forms-file (getenv "NEOVM_FORMS_FILE"))
       (base (if forms-file (file-name-directory forms-file) default-directory))
       (f (expand-file-name "directory-files-fixtures/alpha.txt" base))
       (b (find-file-noselect f)))
  (prog1
      (list
       (bufferp b)
       (eq (get-file-buffer f) b)
       (let ((default-directory (file-name-directory f)))
         (eq (get-file-buffer (file-name-nondirectory f)) b)))
    (kill-buffer b)))

(let* ((forms-file (getenv "NEOVM_FORMS_FILE"))
       (base (if forms-file (file-name-directory forms-file) default-directory))
       (f (expand-file-name "directory-files-fixtures/alpha.txt" base))
       (b (find-file-noselect f)))
  (prog1
      (progn
        (kill-buffer b)
        (get-file-buffer f))))
